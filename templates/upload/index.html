<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Django App</title>
    {% load static %}
    <!-- Link external CSS file -->
    <link rel="stylesheet" type="text/css" href="{% static 'upload/css/styles.css' %}">
    <style>
        @font-face {
            font-family: 'Lato';
            font-display: swap;
            font-style: normal;
            font-weight: 100;
            src: local('Lato'), url('{% static "upload/assets/lato-light.woff2" %}');
        }
        html {
            font-family: 'Lato', 'Segoe UI';
            font-size: 16px;
            font-variant: small-caps;
        }
        body {
            margin: 0;
            background: black;
            color: white;
            overflow-x: hidden;
            width: 100vw;
            height: 100vh;
        }
        body::-webkit-scrollbar {
            display: none;
        }
        hr {
            width: 100%;
        }
        .play {
            position: absolute;
            width: 256px;
            height: 256px;
            z-index: 9;
            bottom: 15%;
            left: 50%;
            margin-left: -125px;
            display: none;
            filter: grayscale(1);
        }
        .play:hover {
            filter: grayscale(0);
        }
        .btn-background {
            fill: grey;
            cursor: pointer;
            opacity: 0.6;
        }
        .btn-background:hover {
            opacity: 1;
        }
        .btn-foreground {
            fill: white;
            cursor: pointer;
            opacity: 0.8;
        }
        .btn-foreground:hover {
            opacity: 1;
        }
        .status {
            position: absolute;
            width: 100vw;
            bottom: 10%;
            text-align: center;
            font-size: 3rem;
            font-weight: 100;
            text-shadow: 2px 2px #303030;
        }
        .menubar {
            width: 100vw;
            background: #303030;
            display: flex;
            justify-content: space-evenly;
            text-align: center;
            padding: 8px;
            cursor: pointer;
        }
        .loader {
            width: 300px;
            height: 300px;
            border: 3px solid transparent;
            border-radius: 50%;
            border-top: 4px solid #d82323;
            animation: spin 4s linear infinite;
            position: absolute;
            bottom: 15%;
            left: 50%;
            margin-left: -150px;
            z-index: 15;
        }
        .loader::before, .loader::after {
            content: "";
            position: absolute;
            top: 6px;
            bottom: 6px;
            left: 6px;
            right: 6px;
            border-radius: 50%;
            border: 4px solid transparent;
        }
        .loader::before {
            border-top-color: #0f8b0b;
            animation: 3s spin linear infinite;
        }
        .loader::after {
            border-top-color: #3ba9d8;
            animation: spin 1.5s linear infinite;
        }
        @keyframes spin {
            from {
                transform: rotate(0deg);
            }
            to {
                transform: rotate(360deg);
            }
        }
        .wave {
            position: fixed;
            top: 0;
            left: -90%;
            width: 100vw;
            height: 100vh;
            border-radius: 10%;
            opacity: .3;
            z-index: -1;
        }
        .wave.one {
            animation: rotate 10000ms infinite linear;
            background: #2F4F4F;
        }
        .wave.two {
            animation: rotate 15000ms infinite linear;
            background: #1F3F3F;
        }
        .wave.three {
            animation: rotate 20000ms infinite linear;
            background: #0F1F1F;
        }
        @keyframes rotate {
            from {
                transform: rotate(0deg);
            }
            to {
                transform: rotate(360deg);
            }
        }
    </style>
</head>
<body>
<div>
    <div id="play" class="play icon-play"></div>
    <div id="background">
        <div class="wave one"></div>
        <div class="wave two"></div>
        <div class="wave three"></div>
    </div>
    <div id="loader" class="loader"></div>
    <div id="status" class="status"></div>
    <div id="menubar" class="menubar">
        <div id="btnModel" class="icon" onclick="setShowModelMenu(!showModelMenu)">
            <div class="icon-games"></div>models
        </div>
        <div id="btnStart" class="icon" onclick="setVideoStarted(!videoStarted)">
            <div class="icon-webcam"></div>
            <span id="btnStartText">start video</span>
        </div>
        <div id="btnDocs" class="icon">DOCS</div>
    </div>
    <div id="media">
        <canvas id="canvas" class="canvas"></canvas>
        <video id="video" playsInline class="video"></video>
    </div>
    <h1>Face Recognition</h1>
    <form id="uploadForm" enctype="multipart/form-data">
        <input type="file" id="fileInput" name="file">
        <button type="submit">Verify</button>
    </form>
    <div id="result"></div>
    <script>
        document.getElementById('uploadForm').addEventListener('submit', async (event) => {
            event.preventDefault();
            const formData = new FormData();
            formData.append('file', document.getElementById('fileInput').files[0]);

            const response = await fetch('/verify/', {
                method: 'POST',
                body: formData
            });
            const result = await response.json();
            document.getElementById('result').textContent = `Verified: ${result.verified}`;
        });
    </script>
    <div id="compare-container" class="compare-image">
        <canvas id="compare-canvas" width="200" height="200"></canvas>
        <div id="similarity"></div>
    </div>
    <div id="samples-container" class="samples-container"></div>
    <div id="hint" class="hint"></div>
    <div id="log" class="log"></div>
    <div id="results" class="results"></div>
    <div id="modelMenu" style="display: none;">
        <!-- Your model menu content goes here -->
    </div>
</div>

<script>
    // Dummy functions for handling clicks
    let showModelMenu = false;
    let videoStarted = false;

    function setShowModelMenu(show) {
        showModelMenu = show;
        var modelMenu = document.getElementById('modelMenu');
        modelMenu.style.display = show ? 'block' : 'none';
    }

    function setVideoStarted(started) {
        videoStarted = started;
        var btnStartText = document.getElementById('btnStartText');
        btnStartText.innerText = started ? 'stop video' : 'start video';
    }
</script>
</body>
</html>
